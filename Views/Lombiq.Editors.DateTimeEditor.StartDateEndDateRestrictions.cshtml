@model dynamic

@{
    string startDateFieldName = Model.StartDateFieldName;
    string endDateFieldName = Model.EndDateFieldName;

    if (string.IsNullOrEmpty(startDateFieldName) || string.IsNullOrEmpty(endDateFieldName))
    {
        return;
    }
}

<script type="text/javascript">
    ; (function ($) {
        $(function () {
            var startDatePicker = $("#@(startDateFieldName.Replace('.', '_') + "_Picker")").lombiq_Editors_DateTimeEditor()[0];
            var endDatePicker = $("#@(endDateFieldName.Replace('.', '_') + "_Picker")").lombiq_Editors_DateTimeEditor()[0];

            function setEndDateByStartDate(startDate) {
                if (startDate) {
                    var endDate = endDatePicker.getDate();

                    if (!endDate) {
                        endDatePicker.setDate(startDate);
                    }

                    endDatePicker.setOption("minDate", startDate);
                }
            }

            function setStartDateByEndDate(endDate) {
                if (endDate) {
                    var startDate = startDatePicker.getDate();

                    if (!startDate) {
                        startDatePicker.setDate(endDate);
                    }

                    startDatePicker.setOption("maxDate", endDate);
                }
            }

            var startDate = startDatePicker.getDate();
            setEndDateByStartDate(startDate);

            var endDate = endDatePicker.getDate();
            setStartDateByEndDate(endDate);

            startDatePicker.settings.dateChanged = function (startDate) {
                setEndDateByStartDate(startDate);
            };

            endDatePicker.settings.dateChanged = function (endDate) {
                setStartDateByEndDate(endDate);
            };
        });
    })(jQuery);
</script>